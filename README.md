# spring-batch-hamkaran-demo
spring batch hamkaran demo

---------------------------------------

create user SPRINGBATCH identified by SPRINGBATCH;
grant connect to SPRINGBATCH;

grant connect to SPRINGBATCH identified by SPRINGBATCH;

grant all privileges to SPRINGBATCH identified by SPRINGBATCH;



---------------------------------------


CREATE SEQUENCE  "SPRINGBATCH"."BATCH_JOB_EXECUTION_SEQ"  MINVALUE 0 MAXVALUE 9223372036854775807 INCREMENT BY 1 START WITH 40 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;

CREATE SEQUENCE  "SPRINGBATCH"."BATCH_JOB_SEQ"  MINVALUE 0 MAXVALUE 9223372036854775807 INCREMENT BY 1 START WITH 20 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;

CREATE SEQUENCE  "SPRINGBATCH"."BATCH_STEP_EXECUTION_SEQ"  MINVALUE 0 MAXVALUE 9223372036854775807 INCREMENT BY 1 START WITH 0 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


CREATE TABLE "SPRINGBATCH"."BATCH_JOB_INSTANCE"
(	"JOB_INSTANCE_ID" NUMBER(19,0) NOT NULL ENABLE,
"VERSION" NUMBER(19,0),
"JOB_NAME" VARCHAR2(100 CHAR) COLLATE "USING_NLS_COMP" NOT NULL ENABLE,
"JOB_KEY" VARCHAR2(32 CHAR) COLLATE "USING_NLS_COMP" NOT NULL ENABLE,
PRIMARY KEY ("JOB_INSTANCE_ID")
USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
TABLESPACE "USERS"  ENABLE,
CONSTRAINT "JOB_INST_UN" UNIQUE ("JOB_NAME", "JOB_KEY")
USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
TABLESPACE "USERS"  ENABLE
)  DEFAULT COLLATION "USING_NLS_COMP" SEGMENT CREATION DEFERRED
PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
NOCOMPRESS LOGGING
TABLESPACE "USERS" ;


CREATE TABLE "SPRINGBATCH"."BATCH_JOB_EXECUTION"
(	"JOB_EXECUTION_ID" NUMBER(19,0) NOT NULL ENABLE,
"VERSION" NUMBER(19,0),
"JOB_INSTANCE_ID" NUMBER(19,0) NOT NULL ENABLE,
"CREATE_TIME" TIMESTAMP (6) NOT NULL ENABLE,
"START_TIME" TIMESTAMP (6) DEFAULT NULL,
"END_TIME" TIMESTAMP (6) DEFAULT NULL,
"STATUS" VARCHAR2(10 CHAR) COLLATE "USING_NLS_COMP",
"EXIT_CODE" VARCHAR2(2500 CHAR) COLLATE "USING_NLS_COMP",
"EXIT_MESSAGE" VARCHAR2(2500 CHAR) COLLATE "USING_NLS_COMP",
"LAST_UPDATED" TIMESTAMP (6),
"JOB_CONFIGURATION_LOCATION" VARCHAR2(2500 CHAR) COLLATE "USING_NLS_COMP",
PRIMARY KEY ("JOB_EXECUTION_ID")
USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
TABLESPACE "USERS"  ENABLE,
CONSTRAINT "JOB_INST_EXEC_FK" FOREIGN KEY ("JOB_INSTANCE_ID")
REFERENCES "SPRINGBATCH"."BATCH_JOB_INSTANCE" ("JOB_INSTANCE_ID") ENABLE
)  DEFAULT COLLATION "USING_NLS_COMP" SEGMENT CREATION DEFERRED
PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
NOCOMPRESS LOGGING
TABLESPACE "USERS" ;


CREATE TABLE "SPRINGBATCH"."BATCH_JOB_EXECUTION_PARAMS"
(	"JOB_EXECUTION_ID" NUMBER(19,0) NOT NULL ENABLE,
"TYPE_CD" VARCHAR2(6 CHAR) COLLATE "USING_NLS_COMP" NOT NULL ENABLE,
"KEY_NAME" VARCHAR2(100 CHAR) COLLATE "USING_NLS_COMP" NOT NULL ENABLE,
"STRING_VAL" VARCHAR2(250 CHAR) COLLATE "USING_NLS_COMP",
"DATE_VAL" TIMESTAMP (6) DEFAULT NULL,
"LONG_VAL" NUMBER(19,0),
"DOUBLE_VAL" NUMBER,
"IDENTIFYING" CHAR(1 BYTE) COLLATE "USING_NLS_COMP" NOT NULL ENABLE,
CONSTRAINT "JOB_EXEC_PARAMS_FK" FOREIGN KEY ("JOB_EXECUTION_ID")
REFERENCES "SPRINGBATCH"."BATCH_JOB_EXECUTION" ("JOB_EXECUTION_ID") ENABLE
)  DEFAULT COLLATION "USING_NLS_COMP" SEGMENT CREATION DEFERRED
PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
NOCOMPRESS LOGGING
TABLESPACE "USERS" ;



CREATE TABLE "SPRINGBATCH"."BATCH_STEP_EXECUTION"
(	"STEP_EXECUTION_ID" NUMBER(19,0) NOT NULL ENABLE,
"VERSION" NUMBER(19,0) NOT NULL ENABLE,
"STEP_NAME" VARCHAR2(100 CHAR) COLLATE "USING_NLS_COMP" NOT NULL ENABLE,
"JOB_EXECUTION_ID" NUMBER(19,0) NOT NULL ENABLE,
"START_TIME" TIMESTAMP (6) NOT NULL ENABLE,
"END_TIME" TIMESTAMP (6) DEFAULT NULL,
"STATUS" VARCHAR2(10 CHAR) COLLATE "USING_NLS_COMP",
"COMMIT_COUNT" NUMBER(19,0),
"READ_COUNT" NUMBER(19,0),
"FILTER_COUNT" NUMBER(19,0),
"WRITE_COUNT" NUMBER(19,0),
"READ_SKIP_COUNT" NUMBER(19,0),
"WRITE_SKIP_COUNT" NUMBER(19,0),
"PROCESS_SKIP_COUNT" NUMBER(19,0),
"ROLLBACK_COUNT" NUMBER(19,0),
"EXIT_CODE" VARCHAR2(2500 CHAR) COLLATE "USING_NLS_COMP",
"EXIT_MESSAGE" VARCHAR2(2500 CHAR) COLLATE "USING_NLS_COMP",
"LAST_UPDATED" TIMESTAMP (6),
PRIMARY KEY ("STEP_EXECUTION_ID")
USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
TABLESPACE "USERS"  ENABLE,
CONSTRAINT "JOB_EXEC_STEP_FK" FOREIGN KEY ("JOB_EXECUTION_ID")
REFERENCES "SPRINGBATCH"."BATCH_JOB_EXECUTION" ("JOB_EXECUTION_ID") ENABLE
)  DEFAULT COLLATION "USING_NLS_COMP" SEGMENT CREATION DEFERRED
PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
NOCOMPRESS LOGGING
TABLESPACE "USERS" ;


CREATE TABLE "SPRINGBATCH"."BATCH_STEP_EXECUTION_CONTEXT"
(	"STEP_EXECUTION_ID" NUMBER(19,0) NOT NULL ENABLE,
"SHORT_CONTEXT" VARCHAR2(2500 CHAR) COLLATE "USING_NLS_COMP" NOT NULL ENABLE,
"SERIALIZED_CONTEXT" CLOB COLLATE "USING_NLS_COMP",
PRIMARY KEY ("STEP_EXECUTION_ID")
USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
TABLESPACE "USERS"  ENABLE,
CONSTRAINT "STEP_EXEC_CTX_FK" FOREIGN KEY ("STEP_EXECUTION_ID")
REFERENCES "SPRINGBATCH"."BATCH_STEP_EXECUTION" ("STEP_EXECUTION_ID") ENABLE
)  DEFAULT COLLATION "USING_NLS_COMP" SEGMENT CREATION DEFERRED
PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
NOCOMPRESS LOGGING
TABLESPACE "USERS"
LOB ("SERIALIZED_CONTEXT") STORE AS SECUREFILE (
TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES ) ;


CREATE TABLE "SPRINGBATCH"."BATCH_JOB_EXECUTION_CONTEXT"
(	"JOB_EXECUTION_ID" NUMBER(19,0) NOT NULL ENABLE,
"SHORT_CONTEXT" VARCHAR2(2500 CHAR) COLLATE "USING_NLS_COMP" NOT NULL ENABLE,
"SERIALIZED_CONTEXT" CLOB COLLATE "USING_NLS_COMP",
PRIMARY KEY ("JOB_EXECUTION_ID")
USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
TABLESPACE "USERS"  ENABLE,
CONSTRAINT "JOB_EXEC_CTX_FK" FOREIGN KEY ("JOB_EXECUTION_ID")
REFERENCES "SPRINGBATCH"."BATCH_JOB_EXECUTION" ("JOB_EXECUTION_ID") ENABLE
)  DEFAULT COLLATION "USING_NLS_COMP" SEGMENT CREATION DEFERRED
PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
NOCOMPRESS LOGGING
TABLESPACE "USERS"
LOB ("SERIALIZED_CONTEXT") STORE AS SECUREFILE (
TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES ) ;



------------------------------------

DELETE FROM crm.batch_step_execution_context;
DELETE FROM crm.batch_job_execution_context;
DELETE FROM crm.batch_step_execution;
DELETE FROM  crm.batch_job_execution_params;
DELETE FROM crm.batch_job_execution;
DELETE FROM crm.batch_job_instance;


--------------------------------------

DROP TABLE  crm.batch_step_execution_context;
DROP TABLE  crm.batch_job_execution_context;
DROP TABLE  crm.batch_step_execution;
DROP TABLE  crm.batch_job_execution_params;
DROP TABLE  crm.batch_job_execution;
DROP TABLE  crm.batch_job_instance;

--------------------------------------